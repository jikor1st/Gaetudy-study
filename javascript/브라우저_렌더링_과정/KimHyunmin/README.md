브라우저의 렌더링
======

>브라우저 렌더링은 웹 페이지에서의 HTML, CSS, JavaScript 등의 리소스를 사용하여 브라우저에 시각적으로 표시되는 내용을 구성하는 과정을 말합니다. 렌더링의 주요 과정에 대해 알아봅시다.

![브라우저 렌더링 순서](https://velog.velcdn.com/images/zaman17/post/7281bb76-19be-4307-b6b9-4e849b3123a9/image.png)

## 브라우저 렌더링 과정

1. **요청 및 로딩**
   - 브라우저가 웹 서버에 HTTP 요청을 보내고, 서버는 HTML, CSS, JavaScript, 이미지 및 기타 리소스 파일을 반환합니다.
   - 브라우저는 이러한 리소스를 로딩하고 파싱합니다.
   <br>
2. **파싱**
   - HTML 파싱: 브라우저는 HTML 파일을 파싱하여 **DOM (Document Object Model) 트리**를 생성합니다. 이 트리는 HTML 문서의 모든 요소와 속성을 포함하며, 중첩 구조를 통해 요소 간의 관계를 표현합니다.
   - CSS 파싱: 외부 CSS 파일과 스타일 태그를 파싱하여 **CSSOM (CSS Object Model) 트리**를 생성합니다. CSSOM 트리는 CSS 규칙과 선택자를 포함하며, 스타일 정보를 DOM과 결합할 수 있도록 구조화됩니다.
   <br>
3. **렌더 트리 생성**
   - 브라우저는 DOM 트리와 CSSOM 트리를 결합하여 **렌더 트리**를 생성합니다.
   - 렌더 트리는 페이지에 표시되는 모든 요소의 시각적 속성을 포함하며, 레이아웃 및 페인팅 단계에 사용됩니다.
   <br>
4. **레이아웃 (Reflow)**
   - 렌더 트리가 생성되면, 브라우저는 각 요소의 위치와 크기를 계산하는 과정인 **레이아웃**을 수행합니다. 이 과정에서 뷰포트의 크기, 요소의 상대적 위치, 플로팅, 절대 위치 지정 등과 같은 CSS 속성이 고려됩니다.
   <br>
5. **페인팅**
   - 레이아웃이 완료되면, 브라우저는 렌더 트리의 각 요소에 색상, 텍스트, 이미지 등의 시각적 스타일을 적용하는 **페인팅** 과정을 수행합니다. 이 작업은 레이어별로 수행되며, GPU 가속을 사용할 수 있는 경우 페인팅 성능이 향상됩니다.
   <br>
6. **합성**
   - 마지막으로, 브라우저는 각 레이어를 합성하여 최종적으로 사용자에게 표시되는 이미지를 생성합니다.
   - 레이어는 CSS 속성(예: `opacity`, `transform`, `z-index` 등)에 따라 다른 겹치기 순서와 위치를 갖습니다.
   - 합성 단계에서는 각 레이어를 올바른 순서로 결합하여 페이지에 표시될 최종 이미지를 만듭니다.
   <br>
## JavaScript와 렌더링

- JavaScript는 브라우저 렌더링 과정에서 중요한 역할을 합니다.
- JavaScript는 웹페이지가 로드되거나 사용자와 상호작용하는 동안 DOM과 CSSOM을 수정하거나 업데이트할 수 있습니다.

## 브라우저 렌더링 최적화

브라우저 렌더링 과정은 사용자 경험에 큰 영향을 미치므로, 최적화가 중요합니다. 몇 가지 브라우저 렌더링 최적화 방법은 다음과 같습니다.

### 1. 코드 최적화

- **HTML 및 CSS 코드 최소화**: 불필요한 공백, 주석, 코드를 제거하여 파일 크기를 줄입니다.
- **JavaScript 코드 최적화**: 비효율적인 코드를 개선하고, 필요한 경우 코드 분할 및 지연 로딩을 적용하여 초기 로딩 시간을 줄입니다.

### 2. 이미지 최적화

- **적절한 이미지 형식 선택**: 이미지의 용도와 특성에 따라 적절한 이미지 형식을 선택합니다. (예: JPEG, PNG, SVG, WebP)
- **이미지 압축**: 이미지 품질을 적절하게 유지하면서 파일 크기를 줄입니다.

### 3. 웹 폰트 최적화

- **폰트 서브셋(Subsetting)**: 사용되는 글자만 포함하는 서브셋을 생성하여 파일 크기를 줄입니다.
- **폰트 로딩 전략**: `font-display` 속성을 사용하여 웹 폰트 로딩 전략을 설정합니다. (예: `swap`, `fallback`, `optional`)

### 4. 캐싱 전략

- **브라우저 캐싱**: 서버에서 `Cache-Control` 헤더를 설정하여 자주 변경되지 않는 리소스를 브라우저에 캐시하도록 합니다.

## 결론

브라우저 렌더링은 웹 페이지를 사용자에게 표시하는 과정으로, 다양한 최적화 기법을 적용하여 사용자 경험을 향상시킬 수 있습니다. 이번 정리를 통해 브라우저 렌더링의 기본 개념과 과정, 최적화 방법에 대해 알아보았습니다. 이제 더 알아보겠습니다.